<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="theme-color" content="#0a0c12" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>FLEX ZONE - Ø¨Ø§Ù‚Ø§Øª Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@500;600;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg: #0a0c12;
      --panel: #0f111a;
      --muted: #9ea4b8;
      --accent: #ffca1a;
      --accent-strong: #f5b400;
      --danger: #ff6b7b;
      --success: #36d092;
      --radius: 18px;
      --shadow: 0 18px 40px rgba(0, 0, 0, 0.35);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: "Cairo", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at 15% 10%, rgba(255, 202, 26, 0.07), transparent 28%),
        radial-gradient(circle at 85% 12%, rgba(255, 202, 26, 0.05), transparent 26%),
        var(--bg);
      color: #f8f9ff;
      min-height: 100vh;
      padding: env(safe-area-inset-top, 0px) env(safe-area-inset-right, 0px) env(safe-area-inset-bottom, 0px) env(safe-area-inset-left, 0px);
    }

    .app {
      max-width: 520px;
      margin: 0 auto;
      padding: 16px 16px 120px;
    }

    .topbar {
      position: sticky;
      top: env(safe-area-inset-top, 0px);
      z-index: 30;
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 12px;
      border-radius: 16px;
      background: rgba(10, 12, 18, 0.92);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.06);
      box-shadow: var(--shadow);
    }

    .back-btn, .mini-btn {
      width: 42px;
      height: 42px;
      display: grid;
      place-items: center;
      background: linear-gradient(160deg, rgba(255, 202, 26, 0.14), rgba(255, 202, 26, 0.04));
      border: 1px solid rgba(255, 202, 26, 0.4);
      border-radius: 14px;
      color: #f8f9ff;
      font-weight: 700;
      cursor: pointer;
    }

    .title-area { flex: 1; }
    .title-area h1 { margin: 0; font-size: 18px; }
    .title-area p { margin: 0; color: var(--muted); font-size: 13px; }

    .screen {
      display: none;
      margin-top: 16px;
    }

    .screen.active { display: grid; gap: 14px; }

    .card {
      background: linear-gradient(180deg, #121521 0%, #0d0f18 100%);
      border: 1px solid rgba(255, 255, 255, 0.06);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      position: relative;
      overflow: hidden;
    }

    .card::after {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 20% 20%, rgba(255, 202, 26, 0.12), transparent 32%);
      pointer-events: none;
    }

    .company-list { display: grid; gap: 14px; }

    .company-card {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 14px;
      border: 2px solid var(--accent);
      background: #0a0c12;
    }

    .company-logo {
      width: 78px;
      height: 78px;
      border-radius: 20px;
      display: grid;
      place-items: center;
      font-size: 28px;
      font-weight: 800;
      color: #fff;
      background: linear-gradient(150deg, rgba(255, 255, 255, 0.12), transparent 48%);
      box-shadow: inset 0 0 0 2px rgba(255, 255, 255, 0.1);
    }

    .company-meta { flex: 1; }
    .company-meta h3 { margin: 0 0 6px; font-size: 18px; }
    .company-meta p { margin: 0; color: var(--muted); }

    .pill { display: inline-flex; align-items: center; gap: 6px; padding: 8px 12px; border-radius: 12px; background: rgba(255, 202, 26, 0.12); color: var(--accent); font-weight: 700; }

    .cta-btn {
      display: inline-flex;
      justify-content: center;
      align-items: center;
      gap: 6px;
      width: 100%;
      background: linear-gradient(135deg, #ffd64d, #f5b400);
      border: none;
      color: #0f0f12;
      font-weight: 800;
      padding: 12px 14px;
      border-radius: 14px;
      cursor: pointer;
      font-size: 15px;
      box-shadow: 0 16px 26px rgba(255, 202, 26, 0.35);
    }

    .package-list { display: grid; gap: 12px; }

    .package-card {
      padding: 12px 14px;
      border: 1px solid rgba(255, 202, 26, 0.35);
      display: grid;
      gap: 6px;
    }

    .package-title { font-size: 17px; font-weight: 800; }
    .package-details { color: var(--muted); font-size: 13px; }

    .price-row { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }
    .price-tag { padding: 8px 12px; background: rgba(255, 202, 26, 0.14); border-radius: 12px; color: #ffd64d; font-weight: 800; }

    .package-meta { display: flex; gap: 8px; flex-wrap: wrap; }
    .badge { padding: 6px 10px; border-radius: 10px; background: rgba(255, 255, 255, 0.06); color: #fff; font-size: 12px; border: 1px solid rgba(255, 255, 255, 0.06); }

    .detail-card { padding: 14px; }
    .section-head { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }

    .options { display: flex; gap: 8px; flex-wrap: wrap; }
    .option-btn {
      padding: 8px 12px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 202, 26, 0.2);
      color: #fff;
      border-radius: 10px;
      cursor: pointer;
    }
    .option-btn.active { background: rgba(255, 202, 26, 0.16); color: #ffd64d; border-color: rgba(255, 202, 26, 0.6); }

    .list { list-style: none; padding: 0; margin: 0; display: grid; gap: 6px; }
    .list li { display: flex; align-items: center; gap: 8px; color: #d5d9e6; }
    .list li .icon { color: var(--success); }

    .input { width: 100%; padding: 12px; border-radius: 12px; border: 1px solid rgba(255, 255, 255, 0.1); background: rgba(255, 255, 255, 0.04); color: #fff; font-family: inherit; margin-bottom: 10px; }

    label { font-weight: 700; font-size: 13px; color: #e7eaf3; display: block; margin-bottom: 6px; }

    .payment-box { padding: 14px; border-radius: 14px; border: 1px dashed rgba(255, 202, 26, 0.6); background: rgba(255, 202, 26, 0.08); color: #ffd64d; display: flex; align-items: center; justify-content: space-between; gap: 10px; }

    .switch-row { display: flex; justify-content: space-between; align-items: center; gap: 10px; margin: 12px 0; }
    .toggle { width: 52px; height: 30px; border-radius: 20px; background: rgba(255, 255, 255, 0.12); border: 1px solid rgba(255, 255, 255, 0.15); position: relative; cursor: pointer; }
    .toggle::after { content: ""; position: absolute; width: 22px; height: 22px; border-radius: 50%; background: #fff; top: 3px; right: 3px; transition: 0.2s ease; }
    .toggle.active { background: rgba(255, 202, 26, 0.4); border-color: rgba(255, 202, 26, 0.7); }
    .toggle.active::after { right: 27px; background: #0d0f14; }

    .orders { display: grid; gap: 10px; }
    .order-card { padding: 12px; border: 1px solid rgba(255, 255, 255, 0.08); display: grid; gap: 6px; }
    .order-head { display: flex; justify-content: space-between; align-items: center; gap: 8px; }
    .status { padding: 6px 10px; border-radius: 10px; font-size: 12px; }
    .status.pending { background: rgba(255, 202, 26, 0.16); color: #ffd64d; }
    .status.approved { background: rgba(54, 208, 146, 0.18); color: #36d092; }
    .status.rejected { background: rgba(255, 107, 123, 0.16); color: #ff9aa7; }

    .admin-tools { display: flex; gap: 8px; flex-wrap: wrap; }
    .ghost-btn { padding: 10px 12px; border-radius: 10px; border: 1px solid rgba(255, 202, 26, 0.35); color: #ffd64d; background: rgba(255, 202, 26, 0.06); cursor: pointer; }

    .thumb { width: 90px; height: 90px; border-radius: 10px; object-fit: cover; border: 1px solid rgba(255, 255, 255, 0.1); }

    .toast {
      position: fixed;
      bottom: 22px;
      left: 50%;
      transform: translateX(-50%);
      padding: 12px 16px;
      border-radius: 14px;
      background: #0c0e15;
      border: 1px solid rgba(255, 202, 26, 0.4);
      color: #ffd64d;
      box-shadow: var(--shadow);
      opacity: 0;
      pointer-events: none;
      transition: 0.2s ease;
      z-index: 99;
    }

    .toast.show { opacity: 1; pointer-events: all; }

    .floating-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 10px 16px calc(14px + env(safe-area-inset-bottom, 0px));
      background: linear-gradient(180deg, rgba(10, 12, 18, 0.1), rgba(10, 12, 18, 0.92));
      backdrop-filter: blur(14px);
      border-top: 1px solid rgba(255, 255, 255, 0.06);
      box-shadow: var(--shadow);
    }

    .contact-row { display: flex; gap: 10px; }
    .contact-btn { flex: 1; border-radius: 12px; border: 1px solid rgba(255, 202, 26, 0.35); padding: 10px; color: #ffd64d; background: rgba(255, 202, 26, 0.06); text-align: center; font-weight: 700; text-decoration: none; }
    .contact-btn.primary { background: linear-gradient(135deg, #ffd64d, #f5b400); color: #0f0f12; }

    .tagline { color: #ffd64d; font-weight: 800; margin: 8px 0 4px; }
    .muted { color: var(--muted); }

    @media (max-width: 420px) {
      .company-logo { width: 70px; height: 70px; }
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="topbar">
      <button class="back-btn" id="backBtn" aria-label="Ø¹ÙˆØ¯Ø©">â†</button>
      <div class="title-area">
        <h1 id="screenTitle">Ø§Ø®ØªØ± Ø´Ø±ÙƒØªÙƒ</h1>
        <p id="screenSubtitle">Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ FLEX ZONE</p>
      </div>
      <button class="mini-btn" id="adminBtn" aria-label="Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…">âš™ï¸</button>
    </div>

    <section class="screen active" id="screen-companies">
      <div class="card" style="padding: 14px; border: 1px solid rgba(255, 202, 26, 0.35);">
        <p class="tagline">ÙƒÙ„ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª ÙÙŠ Ù…ÙƒØ§Ù† ÙˆØ§Ø­Ø¯</p>
        <p class="muted">Ø§Ø®ØªØ± Ø´Ø±ÙƒØªÙƒ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©ØŒ Ø«Ù… ØªØ§Ø¨Ø¹ Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¨Ø§Ù‚Ø© ÙˆØ´Ø±Ø§Ø¡Ù‡Ø§ Ø¨Ø®Ø·ÙˆØ§Øª Ø³Ù‡Ù„Ø©.</p>
      </div>
      <div class="company-list" id="companies"></div>
    </section>

    <section class="screen" id="screen-packages">
      <div class="section-head">
        <div>
          <p class="tagline" id="operatorTag">Ø§Ù„Ø¨Ø§Ù‚Ø§Øª</p>
          <p class="muted" id="operatorDesc">Ø¬Ù…ÙŠØ¹ Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ÙˆØ§Ù„Ù…ÙƒØ§Ù„Ù…Ø§Øª</p>
        </div>
        <select id="categoryFilter" class="input" style="max-width: 180px; margin: 0;">
          <option value="all">ÙƒÙ„ Ø§Ù„ÙØ¦Ø§Øª</option>
        </select>
      </div>
      <div class="package-list" id="packages"></div>
    </section>

    <section class="screen" id="screen-details">
      <div class="card detail-card">
        <div class="section-head">
          <div>
            <p class="tagline" id="detailTitle">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¨Ø§Ù‚Ø©</p>
            <p class="muted" id="detailSubtitle"></p>
          </div>
          <div class="price-tag" id="detailPrice"></div>
        </div>
        <div>
          <label>Ø§Ø®ØªØ± Ù…Ø¯Ø© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©</label>
          <div class="options" id="validityOptions"></div>
        </div>
        <div style="margin-top: 10px;">
          <label>Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª</label>
          <ul class="list" id="featureList"></ul>
        </div>
      </div>
      <button class="cta-btn" id="goBuy">Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¨Ø§Ù‚Ø©</button>
    </section>

    <section class="screen" id="screen-purchase">
      <div class="card detail-card">
        <div class="section-head">
          <div>
            <p class="tagline" id="checkoutTitle">Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¨Ø§Ù‚Ø©</p>
            <p class="muted" id="checkoutSubtitle"></p>
          </div>
          <span class="status pending" id="checkoutOperator"></span>
        </div>
        <div id="dynamicFields"></div>
        <div>
          <label for="fullName">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
          <input id="fullName" class="input" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ" />
          <label for="phone">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
          <input id="phone" class="input" type="tel" placeholder="01xxxxxxxxx" />
          <div id="transferBlock">
            <label for="transfer">ÙƒÙˆØ¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„</label>
            <input id="transfer" class="input" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„" />
          </div>
          <div id="passwordBlock" style="display:none;">
            <label for="password">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
            <input id="password" class="input" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´" />
            <label for="confirmPassword">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
            <input id="confirmPassword" class="input" type="password" placeholder="ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" />
          </div>
        </div>
        <div>
          <label for="paymentImage">ØµÙˆØ±Ø© Ø§Ù„Ø¯ÙØ¹</label>
          <input id="paymentImage" class="input" type="file" accept="image/*" />
          <div class="payment-box">
            <div>
              <div style="font-weight:800;">Ø¨Ø±Ø¬Ø§Ø¡ ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ø¨Ù„Øº ÙˆØ¥Ø±ÙØ§Ù‚ Ø§Ù„ØµÙˆØ±Ø©</div>
              <div id="paymentNumber">1055047192</div>
            </div>
            <button class="mini-btn" id="copyBtn">ğŸ“‹</button>
          </div>
          <div id="imagePreview" style="margin-top:10px;"></div>
        </div>
        <div class="switch-row">
          <span>ØªØ¬Ø¯ÙŠØ¯ Ø´Ù‡Ø±ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠ</span>
          <div class="toggle" id="autoRenew"></div>
        </div>
        <button class="cta-btn" id="submitOrder">Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø´Ø±Ø§Ø¡</button>
      </div>
    </section>

    <section class="screen" id="screen-admin">
      <div class="card detail-card">
        <div class="section-head">
          <div>
            <p class="tagline">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</p>
            <p class="muted">Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª ÙˆØ§Ù„ØµÙˆØ± Ø§Ù„Ù…Ø±ÙÙ‚Ø©</p>
          </div>
          <div class="admin-tools">
            <button class="ghost-btn" id="exportBtn">ØªØµØ¯ÙŠØ± JSON</button>
            <label class="ghost-btn" style="cursor:pointer;">
              Ø§Ø³ØªÙŠØ±Ø§Ø¯ JSON
              <input type="file" id="importInput" accept="application/json" style="display:none;" />
            </label>
            <button class="ghost-btn" id="resetBtn">Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·</button>
          </div>
        </div>
        <div class="orders" id="orders"></div>
      </div>
    </section>
  </div>

  <div class="floating-bar">
    <div class="contact-row">
      <a class="contact-btn primary" href="https://wa.me/201555701276" target="_blank">ØªÙˆØ§ØµÙ„ ÙˆØ§ØªØ³Ø§Ø¨</a>
      <a class="contact-btn" href="tel:+201555701276">Ø§ØªØµØ§Ù„ Ù…Ø¨Ø§Ø´Ø±</a>
    </div>
  </div>

  <div class="toast" id="toast"></div>

  <script>
    const screens = {
      companies: document.getElementById('screen-companies'),
      packages: document.getElementById('screen-packages'),
      details: document.getElementById('screen-details'),
      purchase: document.getElementById('screen-purchase'),
      admin: document.getElementById('screen-admin')
    };

    const titleEl = document.getElementById('screenTitle');
    const subtitleEl = document.getElementById('screenSubtitle');
    const backBtn = document.getElementById('backBtn');
    const adminBtn = document.getElementById('adminBtn');
    const toast = document.getElementById('toast');
    const categoryFilter = document.getElementById('categoryFilter');

    let currentScreen = 'companies';
    let currentOperator = null;
    let selectedPackage = null;
    let selectedValidity = null;
    let orders = JSON.parse(localStorage.getItem('orders') || '[]');
    let uploadedImage = '';

    const operators = [
      { id: 'vodafone', name: 'ÙÙˆØ¯Ø§ÙÙˆÙ†', tagline: 'ÙÙ„ÙŠÙƒØ³ + ÙÙŠØ³', theme: '#b5001a', accent: '#ffd64d', payment: '1055047192' },
      { id: 'orange', name: 'Ø£ÙˆØ±Ù†Ø¬', tagline: 'Ù…ÙŠÙƒØ³ + Ù†Øª', theme: '#ff6c00', accent: '#ffd64d', payment: '1055047192' },
      { id: 'etisalat', name: 'Ø§ØªØµØ§Ù„Ø§Øª Ù…ØµØ±', tagline: 'Ù…ÙŠÙƒØ³ + Ù…ÙƒØ§Ù„Ù…Ø§Øª', theme: '#00aa6c', accent: '#ffd64d', payment: '1055047192' },
      { id: 'we', name: 'WE', tagline: 'Ù†Øª + Ø³ÙˆØ´ÙŠØ§Ù„', theme: '#7a00c8', accent: '#ffd64d', payment: '1055047192' }
    ];

    const packages = [
      // Vodafone
      { id: 'vf-15600', operator: 'vodafone', name: '15600 ÙÙ„ÙŠÙƒØ³ + 5000 Ù…ÙŠØ¬Ø§ ÙÙŠØ³', category: 'ÙÙ„ÙŠÙƒØ³', price: 250, data: '15600Flex', validity: ['Ø´Ù‡Ø±'], details: ['Ù„Ø§Ø²Ù… ØªÙƒÙˆÙ† Ù†Ø¸Ø§Ù… ÙÙ„ÙŠÙƒØ³ 260 + ÙŠØ¯Ø®Ù„ Ø§Ù„ÙÙ„ÙŠÙƒØ³', 'Ø¹Ø§Ø¯ÙŠ Ùˆ Ù…Ù„ÙˆØ´ Ù…Ø´Ø­Ø¯Ø§Øª', 'Ø§Ù„Ø¨Ø§Ù‚Ø© Ø¨ØªØªÙØ¹Ù„ Ø®Ù„Ø§Ù„ Ù†ÙØ³ Ø§Ù„ÙŠÙˆÙ…'], },
      { id: 'vf-19500', operator: 'vodafone', name: '19500 ÙÙ„ÙŠÙƒØ³ + 5000 Ù…ÙŠØ¬Ø§ ÙÙŠØ³', category: 'ÙÙ„ÙŠÙƒØ³', price: 270, data: '19500Flex', validity: ['Ø´Ù‡Ø±'], details: ['Ù„Ø§Ø²Ù… ØªÙƒÙˆÙ† Ù†Ø¸Ø§Ù… ÙÙ„ÙŠÙƒØ³ 260 + ÙŠØ¯Ø®Ù„ Ø§Ù„ÙÙ„ÙŠÙƒØ³', 'Ø¹Ø§Ø¯ÙŠ Ùˆ Ù…Ù„Ù‡ÙˆØ´ Ù…Ø´Ø­Ø¯Ø§Øª', 'Ø§Ù„Ø¨Ø§Ù‚Ø© Ø¨ØªØªÙØ¹Ù„ Ø®Ù„Ø§Ù„ Ù†ÙØ³ Ø§Ù„ÙŠÙˆÙ…'], },
      { id: 'vf-23500', operator: 'vodafone', name: '23500 ÙÙ„ÙŠÙƒØ³ + 6000 Ù…ÙŠØ¬Ø§ ÙÙŠØ³', category: 'ÙÙ„ÙŠÙƒØ³', price: 310, data: '23500Flex', validity: ['Ø´Ù‡Ø±'], details: ['Ù„Ø§Ø²Ù… ØªÙƒÙˆÙ† Ù†Ø¸Ø§Ù… ÙÙ„ÙŠÙƒØ³ 260 Ø£Ùˆ Ø£Ø¹Ù„Ù‰', 'Ø¹Ø§Ø¯ÙŠ Ùˆ Ù…Ù„ÙˆØ´ Ù…Ø´Ø­Ø¯Ø§Øª', 'Ø§Ù„ØªÙØ¹ÙŠÙ„ Ø®Ù„Ø§Ù„ 24 Ø³Ø§Ø¹Ø©'], },
      { id: 'vf-28000', operator: 'vodafone', name: '28000 ÙÙ„ÙŠÙƒØ³ + 7000 Ù…ÙŠØ¬Ø§ ÙÙŠØ³', category: 'ÙÙ„ÙŠÙƒØ³', price: 340, data: '28000Flex', validity: ['Ø´Ù‡Ø±'], details: ['Ù„Ø§Ø²Ù… ØªÙƒÙˆÙ† Ù†Ø¸Ø§Ù… ÙÙ„ÙŠÙƒØ³ 260 Ø£Ùˆ Ø£Ø¹Ù„Ù‰', 'Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„ÙŠ ÙŠØ³ØªØ®Ø¯Ù… ÙÙŠØ³ ÙƒØªÙŠØ±', 'Ø§Ù„ØªÙØ¹ÙŠÙ„ Ø®Ù„Ø§Ù„ 24 Ø³Ø§Ø¹Ø©'], },
      // Orange
      { id: 'or-3250', operator: 'orange', name: '3250 Ù…ÙŠÙƒØ³ "Ù†Øª+Ù…ÙƒØ§Ù„Ù…Ø§Øª"', category: 'Ù…ÙŠÙƒØ³', price: 50, data: '3250Mix', validity: ['28 ÙŠÙˆÙ…'], details: ['Ù„Ø§Ø²Ù… ØªÙƒÙˆÙ† Ù†Ø¸Ø§Ù… Ù…ÙŠÙƒØ³ 15 Ù‚Ø±Ø´', 'Ø¹Ø§Ø¯ÙŠ Ùˆ Ø¹Ù„ÙŠÙ‡Ø´ Ù…Ø´Ø­Ø¯Ø§Øª', 'Ø§Ù„Ø¨Ø§Ù‚Ø© Ø¨ØªØªÙØ¹Ù„ Ø®Ù„Ø§Ù„ 24 Ø³Ø§Ø¹Ø©'], },
      { id: 'or-6500', operator: 'orange', name: '6500 Ù…ÙŠÙƒØ³ "Ù†Øª+Ù…ÙƒØ§Ù„Ù…Ø§Øª"', category: 'Ù…ÙŠÙƒØ³', price: 80, data: '6500Mix', validity: ['28 ÙŠÙˆÙ…'], details: ['Ù„Ø§Ø²Ù… ØªÙƒÙˆÙ† Ù†Ø¸Ø§Ù… Ù…ÙŠÙƒØ³ 15 Ù‚Ø±Ø´', 'Ø¹Ø§Ø¯ÙŠ Ùˆ Ø¹Ù„ÙŠÙ‡Ø´ Ù…Ø´Ø­Ø¯Ø§Øª', 'Ø§Ù„Ø¨Ø§Ù‚Ø© Ø¨ØªØªÙØ¹Ù„ Ø®Ù„Ø§Ù„ 24 Ø³Ø§Ø¹Ø©'], },
      { id: 'or-9000', operator: 'orange', name: '9000 Ù…ÙŠÙƒØ³ + Ø³ÙˆØ´ÙŠØ§Ù„', category: 'Ù…ÙŠÙƒØ³', price: 110, data: '9000Mix', validity: ['28 ÙŠÙˆÙ…'], details: ['Ø§Ø´ØªØ±Ø§Ùƒ Ù…ÙŠÙƒØ³ Ø¨Ø¯ÙˆÙ† Ø´Ø±ÙˆØ· Ø¥Ø¶Ø§ÙÙŠØ©', 'Ø¯Ø¹Ù… Ø³ÙˆØ´ÙŠØ§Ù„ Ùˆ Ù†Øª', 'ØªÙØ¹ÙŠÙ„ Ø®Ù„Ø§Ù„ Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„'], },
      { id: 'or-13000', operator: 'orange', name: '13000 Ù…ÙŠÙƒØ³ + Ø¯Ù‚Ø§ÙŠÙ‚ Ù„ÙƒÙ„ Ø§Ù„Ø´Ø¨ÙƒØ§Øª', category: 'Ù…ÙŠÙƒØ³', price: 150, data: '13000Mix', validity: ['28 ÙŠÙˆÙ…'], details: ['Ù…ÙƒØ§Ù„Ù…Ø§Øª Ùˆ Ù†Øª Ù…ØªÙˆØ§Ø²Ù†Ø©', 'ØªÙØ¹ÙŠÙ„ Ø®Ù„Ø§Ù„ 24 Ø³Ø§Ø¹Ø©', 'Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙƒØ«ÙŠÙ'], },
      // Etisalat
      { id: 'et-3250', operator: 'etisalat', name: '3250 Ù…ÙŠÙƒØ³ "Ù†Øª+Ù…ÙƒØ§Ù„Ù…Ø§Øª"', category: 'Ù…ÙŠÙƒØ³', price: 50, data: '3250Mix', validity: ['28 ÙŠÙˆÙ…'], details: ['Ù„Ø§Ø²Ù… ØªÙƒÙˆÙ† Ù†Ø¸Ø§Ù… Ù…ÙŠÙƒØ³ 15 Ù‚Ø±Ø´', 'Ø¹Ø§Ø¯ÙŠ Ùˆ Ø¹Ù„ÙŠÙ‡Ø´ Ù…Ø´Ø­Ø¯Ø§Øª', 'Ø§Ù„Ø¨Ø§Ù‚Ø© Ø¨ØªØªÙØ¹Ù„ Ø®Ù„Ø§Ù„ 24 Ø³Ø§Ø¹Ø©'], },
      { id: 'et-6500', operator: 'etisalat', name: '6500 Ù…ÙŠÙƒØ³ "Ù†Øª+Ù…ÙƒØ§Ù„Ù…Ø§Øª"', category: 'Ù…ÙŠÙƒØ³', price: 80, data: '6500Mix', validity: ['28 ÙŠÙˆÙ…'], details: ['Ù„Ø§Ø²Ù… ØªÙƒÙˆÙ† Ù†Ø¸Ø§Ù… Ù…ÙŠÙƒØ³ 15 Ù‚Ø±Ø´', 'Ø¹Ø§Ø¯ÙŠ Ùˆ Ø¹Ù„ÙŠÙ‡Ø´ Ù…Ø´Ø­Ø¯Ø§Øª', 'Ø§Ù„Ø¨Ø§Ù‚Ø© Ø¨ØªØªÙØ¹Ù„ Ø®Ù„Ø§Ù„ 24 Ø³Ø§Ø¹Ø©'], },
      { id: 'et-11000', operator: 'etisalat', name: '11000 Ù…ÙŠÙƒØ³ + Ø³ÙˆØ´ÙŠØ§Ù„', category: 'Ù…ÙŠÙƒØ³', price: 140, data: '11000Mix', validity: ['28 ÙŠÙˆÙ…'], details: ['Ù…ÙƒØ§Ù„Ù…Ø§Øª Ùˆ Ù†Øª Ù…ØªÙˆØ§Ø²Ù†Ø©', 'ØªÙØ¹ÙŠÙ„ Ø®Ù„Ø§Ù„ 24 Ø³Ø§Ø¹Ø©', 'Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¹Ø§Ù„ÙŠ'], },
      { id: 'et-15000', operator: 'etisalat', name: '15000 Ù…ÙŠÙƒØ³ Ø¨Ù„Ø³', category: 'Ù…ÙŠÙƒØ³', price: 180, data: '15000Mix', validity: ['28 ÙŠÙˆÙ…'], details: ['Ø¨Ø§Ù‚Ø© Ù…Ù…ÙŠØ²Ø© Ù„Ø§ØµØ­Ø§Ø¨ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¹Ø§Ù„ÙŠ', 'Ø¯Ø¹Ù… Ø³ÙˆØ´ÙŠØ§Ù„ØŒ Ù†ØªØŒ Ù…ÙƒØ§Ù„Ù…Ø§Øª', 'ØªÙØ¹ÙŠÙ„ Ø®Ù„Ø§Ù„ Ù†ÙØ³ Ø§Ù„ÙŠÙˆÙ…'], },
      // WE
      { id: 'we-50', operator: 'we', name: '70 Ø¬ÙŠØ¬Ø§ + Ø³ÙˆØ´ÙŠØ§Ù„', category: 'Ø³ÙˆØ¨Ø± Ù…ÙŠØ¬Ø§', price: 120, data: '70GB', validity: ['Ø´Ù‡Ø±'], details: ['Ù…ØªØ§Ø­Ø© Ù„Ø®Ø·ÙˆØ· WE', 'Ø³Ø±Ø¹Ø© Ø¹Ø§Ù„ÙŠØ© Ù…Ø¹ Ø³ÙˆØ´ÙŠØ§Ù„', 'Ø§Ù„ØªÙØ¹ÙŠÙ„ Ø®Ù„Ø§Ù„ Ù†ÙØ³ Ø§Ù„ÙŠÙˆÙ…'], },
      { id: 'we-90', operator: 'we', name: '120 Ø¬ÙŠØ¬Ø§ + Ø³ÙˆØ´ÙŠØ§Ù„', category: 'Ø³ÙˆØ¨Ø± Ù…ÙŠØ¬Ø§', price: 170, data: '120GB', validity: ['Ø´Ù‡Ø±'], details: ['Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙƒØ«Ù', 'Ø³ÙˆØ´ÙŠØ§Ù„ Ø´Ø§Ù…Ù„', 'Ø§Ù„ØªÙØ¹ÙŠÙ„ Ø®Ù„Ø§Ù„ Ù†ÙØ³ Ø§Ù„ÙŠÙˆÙ…'], },
      { id: 'we-140', operator: 'we', name: '180 Ø¬ÙŠØ¬Ø§ + Ø³ÙˆØ´ÙŠØ§Ù„', category: 'Ø³ÙˆØ¨Ø± Ù…ÙŠØ¬Ø§', price: 220, data: '180GB', validity: ['Ø´Ù‡Ø±'], details: ['Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ù‹Ø§', 'Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙØªÙˆØ­', 'Ø§Ù„ØªÙØ¹ÙŠÙ„ Ø®Ù„Ø§Ù„ Ù†ÙØ³ Ø§Ù„ÙŠÙˆÙ…'], },
      { id: 'we-200', operator: 'we', name: '250 Ø¬ÙŠØ¬Ø§ + Ø³ÙˆØ´ÙŠØ§Ù„', category: 'Ø³ÙˆØ¨Ø± Ù…ÙŠØ¬Ø§', price: 280, data: '250GB', validity: ['Ø´Ù‡Ø±'], details: ['Ù…Ø®ØµØµØ© Ù„Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…Ù†Ø²Ù„ÙŠØ© ÙˆØ§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„', 'Ø£ÙˆÙ„ÙˆÙŠØ© Ø¯Ø¹Ù…', 'Ø§Ù„ØªÙØ¹ÙŠÙ„ Ø®Ù„Ø§Ù„ 24 Ø³Ø§Ø¹Ø©'], },
    ];

    const validityPricing = {
      'Ø´Ù‡Ø±': 1,
      'Ø´Ù‡Ø±ÙŠÙ†': 1.9,
      '3 Ø´Ù‡ÙˆØ±': 2.7,
      '28 ÙŠÙˆÙ…': 1,
    };

    function showToast(msg) {
      toast.textContent = msg;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 2000);
    }

    function switchScreen(target) {
      Object.values(screens).forEach(section => section.classList.remove('active'));
      screens[target].classList.add('active');
      currentScreen = target;
      backBtn.style.visibility = target === 'companies' ? 'hidden' : 'visible';
      if (target === 'admin') {
        titleEl.textContent = 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…';
        subtitleEl.textContent = 'Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ùˆ Ø§Ù„ØµÙˆØ±';
      }
    }

    function renderCompanies() {
      const container = document.getElementById('companies');
      container.innerHTML = '';
      operators.forEach(op => {
        const card = document.createElement('div');
        card.className = 'card company-card';
        const logo = document.createElement('div');
        logo.className = 'company-logo';
        logo.style.background = `radial-gradient(circle at 20% 20%, rgba(255,255,255,0.18), transparent 45%), ${op.theme}`;
        logo.textContent = op.name.split(' ')[0][0];
        const meta = document.createElement('div');
        meta.className = 'company-meta';
        meta.innerHTML = `<h3>${op.name}</h3><p>${op.tagline}</p>`;
        const btn = document.createElement('button');
        btn.className = 'cta-btn';
        btn.textContent = 'Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª';
        btn.addEventListener('click', () => openOperator(op.id));
        card.append(logo, meta, btn);
        container.appendChild(card);
      });
    }

    function openOperator(id) {
      currentOperator = operators.find(o => o.id === id);
      titleEl.textContent = currentOperator.name;
      subtitleEl.textContent = 'Ø§Ø®ØªØ± Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ø«Ù… ØªØ§Ø¨Ø¹ Ù„Ù„Ø´Ø±Ø§Ø¡';
      document.getElementById('operatorTag').textContent = `${currentOperator.name} - Ø§Ù„Ø¨Ø§Ù‚Ø§Øª`;
      document.getElementById('operatorDesc').textContent = currentOperator.tagline;
      populateCategories();
      renderPackages();
      switchScreen('packages');
    }

    function populateCategories() {
      const cats = new Set(['all']);
      packages.filter(p => p.operator === currentOperator.id).forEach(p => cats.add(p.category));
      categoryFilter.innerHTML = '';
      [...cats].forEach(cat => {
        const opt = document.createElement('option');
        opt.value = cat;
        opt.textContent = cat === 'all' ? 'ÙƒÙ„ Ø§Ù„ÙØ¦Ø§Øª' : cat;
        categoryFilter.appendChild(opt);
      });
    }

    function renderPackages() {
      const list = document.getElementById('packages');
      list.innerHTML = '';
      const selectedCat = categoryFilter.value || 'all';
      packages
        .filter(p => p.operator === currentOperator.id)
        .filter(p => selectedCat === 'all' ? true : p.category === selectedCat)
        .forEach(pkg => {
          const card = document.createElement('div');
          card.className = 'card package-card';
          const title = document.createElement('div');
          title.className = 'package-title';
          title.textContent = pkg.name;
          const detail = document.createElement('div');
          detail.className = 'package-details';
          detail.textContent = `${pkg.data} - Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© ${pkg.validity[0]}`;
          const meta = document.createElement('div');
          meta.className = 'package-meta';
          meta.innerHTML = `<span class="badge">${pkg.category}</span><span class="badge">${pkg.data}</span>`;
          const priceRow = document.createElement('div');
          priceRow.className = 'price-row';
          priceRow.innerHTML = `<span class="price-tag">EGP ${pkg.price}</span>`;
          const btn = document.createElement('button');
          btn.className = 'cta-btn';
          btn.textContent = 'ØªÙØ§ØµÙŠÙ„ ÙˆØ´Ø±Ø§Ø¡';
          btn.addEventListener('click', () => openDetails(pkg));
          card.append(title, detail, meta, priceRow, btn);
          list.appendChild(card);
        });
    }

    function openDetails(pkg) {
      selectedPackage = pkg;
      selectedValidity = pkg.validity[0];
      document.getElementById('detailTitle').textContent = pkg.name;
      document.getElementById('detailSubtitle').textContent = `${pkg.data}`;
      updatePriceTag();
      const list = document.getElementById('featureList');
      list.innerHTML = '';
      pkg.details.forEach(d => {
        const li = document.createElement('li');
        li.innerHTML = `<span class="icon">âœ”</span>${d}`;
        list.appendChild(li);
      });
      renderValidityOptions(pkg.validity);
      switchScreen('details');
    }

    function renderValidityOptions(options) {
      const container = document.getElementById('validityOptions');
      container.innerHTML = '';
      const defaultOptions = ['Ø´Ù‡Ø±', 'Ø´Ù‡Ø±ÙŠÙ†', '3 Ø´Ù‡ÙˆØ±'];
      const merged = Array.from(new Set([...options, ...defaultOptions]));
      merged.forEach(opt => {
        const btn = document.createElement('button');
        btn.className = 'option-btn' + (opt === selectedValidity ? ' active' : '');
        btn.textContent = opt;
        btn.addEventListener('click', () => {
          selectedValidity = opt;
          renderValidityOptions(options);
          updatePriceTag();
        });
        container.appendChild(btn);
      });
    }

    function updatePriceTag() {
      if (!selectedPackage) return;
      const multiplier = validityPricing[selectedValidity] || 1;
      const price = Math.round(selectedPackage.price * multiplier);
      document.getElementById('detailPrice').textContent = `EGP ${price}`;
      document.getElementById('checkoutSubtitle').textContent = selectedValidity;
      document.getElementById('checkoutTitle').textContent = selectedPackage.name;
      document.getElementById('checkoutOperator').textContent = operators.find(o => o.id === selectedPackage.operator).name;
      document.getElementById('paymentNumber').textContent = operators.find(o => o.id === selectedPackage.operator).payment;
    }

    function buildDynamicFields() {
      const container = document.getElementById('dynamicFields');
      container.innerHTML = '';
      if (selectedPackage.operator === 'vodafone') {
        document.getElementById('passwordBlock').style.display = 'block';
        document.getElementById('transferBlock').style.display = 'none';
      } else {
        document.getElementById('passwordBlock').style.display = 'none';
        document.getElementById('transferBlock').style.display = 'block';
      }
    }

    function goPurchase() {
      buildDynamicFields();
      switchScreen('purchase');
    }

    function copyNumber() {
      const num = document.getElementById('paymentNumber').textContent;
      navigator.clipboard.writeText(num).then(() => showToast('ØªÙ… Ù†Ø³Ø® Ø±Ù‚Ù… Ø§Ù„ØªØ­ÙˆÙŠÙ„'));
    }

    function toggleAutoRenew() {
      document.getElementById('autoRenew').classList.toggle('active');
    }

    function onImageSelected(e) {
      const file = e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = evt => {
        uploadedImage = evt.target.result;
        renderPreview();
      };
      reader.readAsDataURL(file);
    }

    function renderPreview() {
      const container = document.getElementById('imagePreview');
      container.innerHTML = '';
      if (!uploadedImage) return;
      const img = document.createElement('img');
      img.src = uploadedImage;
      img.className = 'thumb';
      container.appendChild(img);
    }

    function submitOrder() {
      if (!selectedPackage) return;
      const name = document.getElementById('fullName').value.trim();
      const phone = document.getElementById('phone').value.trim();
      const transfer = document.getElementById('transfer').value.trim();
      const password = document.getElementById('password').value.trim();
      const confirmPassword = document.getElementById('confirmPassword').value.trim();
      const autoRenew = document.getElementById('autoRenew').classList.contains('active');
      if (!name || !phone) return showToast('Ø§Ù…Ù„Ø£ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©');
      if (selectedPackage.operator === 'vodafone') {
        if (!password || password !== confirmPassword) return showToast('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù…Ø·Ù„ÙˆØ¨Ø© Ù„ÙÙˆØ¯Ø§ÙÙˆÙ†');
      } else {
        if (!transfer) return showToast('Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„');
      }
      const multiplier = validityPricing[selectedValidity] || 1;
      const price = Math.round(selectedPackage.price * multiplier);
      const order = {
        id: 'order-' + Date.now(),
        package: selectedPackage.name,
        operator: operators.find(o => o.id === selectedPackage.operator).name,
        price,
        validity: selectedValidity,
        name,
        phone,
        transfer: selectedPackage.operator === 'vodafone' ? 'Ù…Ø·Ù„ÙˆØ¨ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ±' : transfer,
        status: 'pending',
        autoRenew,
        image: uploadedImage,
        createdAt: new Date().toLocaleString('ar-EG'),
      };
      orders.unshift(order);
      localStorage.setItem('orders', JSON.stringify(orders));
      renderOrders();
      showToast('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­');
      document.getElementById('fullName').value = '';
      document.getElementById('phone').value = '';
      document.getElementById('transfer').value = '';
      document.getElementById('password').value = '';
      document.getElementById('confirmPassword').value = '';
      uploadedImage = '';
      renderPreview();
    }

    function renderOrders() {
      const container = document.getElementById('orders');
      container.innerHTML = '';
      if (!orders.length) {
        const empty = document.createElement('p');
        empty.className = 'muted';
        empty.textContent = 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø¨Ø¹Ø¯';
        container.appendChild(empty);
        return;
      }
      orders.forEach(ord => {
        const card = document.createElement('div');
        card.className = 'card order-card';
        const head = document.createElement('div');
        head.className = 'order-head';
        head.innerHTML = `<strong>${ord.package}</strong><span class="status ${ord.status}">${ord.status}</span>`;
        const meta = document.createElement('div');
        meta.className = 'muted';
        meta.textContent = `${ord.operator} â€¢ ${ord.validity} â€¢ ${ord.price} EGP`;
        const info = document.createElement('div');
        info.className = 'muted';
        info.textContent = `${ord.name} - ${ord.phone}`;
        const actions = document.createElement('div');
        actions.className = 'admin-tools';
        ['approved','pending','rejected'].forEach(state => {
          const btn = document.createElement('button');
          btn.className = 'ghost-btn';
          btn.textContent = state === 'approved' ? 'Ø§Ø¹ØªÙ…Ø§Ø¯' : state === 'rejected' ? 'Ø±ÙØ¶' : 'Ù…Ø¹Ù„Ù‚';
          btn.addEventListener('click', () => updateStatus(ord.id, state));
          actions.appendChild(btn);
        });
        if (ord.image) {
          const img = document.createElement('img');
          img.src = ord.image;
          img.className = 'thumb';
          actions.appendChild(img);
        }
        const time = document.createElement('div');
        time.className = 'muted';
        time.textContent = ord.createdAt;
        card.append(head, meta, info, actions, time);
        container.appendChild(card);
      });
    }

    function updateStatus(id, status) {
      orders = orders.map(o => o.id === id ? { ...o, status } : o);
      localStorage.setItem('orders', JSON.stringify(orders));
      renderOrders();
      showToast('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©');
    }

    function exportOrders() {
      const blob = new Blob([JSON.stringify(orders, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'orders.json';
      a.click();
      URL.revokeObjectURL(url);
    }

    function importOrders(e) {
      const file = e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = evt => {
        try {
          orders = JSON.parse(evt.target.result);
          localStorage.setItem('orders', JSON.stringify(orders));
          renderOrders();
          showToast('ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª');
        } catch (err) {
          showToast('ÙØ´Ù„ Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯');
        }
      };
      reader.readAsText(file);
    }

    function resetOrders() {
      if (!confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù ÙƒÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§ØªØŸ')) return;
      orders = [];
      localStorage.removeItem('orders');
      renderOrders();
    }

    function initEvents() {
      backBtn.addEventListener('click', () => {
        if (currentScreen === 'packages') switchScreen('companies');
        else if (currentScreen === 'details') switchScreen('packages');
        else if (currentScreen === 'purchase') switchScreen('details');
        else if (currentScreen === 'admin') switchScreen('companies');
      });
      adminBtn.addEventListener('click', () => {
        renderOrders();
        switchScreen('admin');
      });
      document.getElementById('goBuy').addEventListener('click', goPurchase);
      document.getElementById('copyBtn').addEventListener('click', copyNumber);
      document.getElementById('autoRenew').addEventListener('click', toggleAutoRenew);
      document.getElementById('paymentImage').addEventListener('change', onImageSelected);
      document.getElementById('submitOrder').addEventListener('click', submitOrder);
      document.getElementById('exportBtn').addEventListener('click', exportOrders);
      document.getElementById('importInput').addEventListener('change', importOrders);
      document.getElementById('resetBtn').addEventListener('click', resetOrders);
      categoryFilter.addEventListener('change', renderPackages);
      document.getElementById('goBuy').addEventListener('click', () => {
        document.getElementById('checkoutSubtitle').textContent = selectedValidity;
      });
    }

    renderCompanies();
    renderOrders();
    initEvents();
    backBtn.style.visibility = 'hidden';
  </script>
</body>
</html>
